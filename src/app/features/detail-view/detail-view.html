@if (loading) {
  <div class="loading">Cargando...</div>
} @else if (item) {
  <div>
    <div class="detail-container">
      <div class="detail-hero">
        <img [src]="posterPath" [alt]=" displayTitle">
      </div>
      <div class="detail-info">
        <div class="detail-meta">
          <h3 class="type-label">
            <span>M</span>@if(type === 'movie'){ PELICULAS }@if(type === 'tv'){ SERIES }
          </h3>
          <h1 class="detail-title">{{ displayTitle }}</h1>      
          <p class="detail-overview">{{ item.overview }}</p>
          <div class="container">
            <span class="rating">⭐ {{ item.vote_average }}/10</span>
            <span class="year">{{ releaseDate }}</span>
          </div>
          @if (hasGenres) {
            <span class="genres">
              {{ genresList }}
            </span>
          }
        </div>
      </div>
    </div>
    @if (cast.length > 0) {
      <div class="cast-section">
        <h2>Reparto Principal</h2>
        <div class="cast-carousel-container">
          <!-- Flecha izquierda -->
          <button class="cast-nav-arrow prev-arrow" (click)="scrollCastLeft()">‹</button>
          
          <!-- Contenedor del carrusel -->
          <div class="cast-row" #castRow>
            @for (actor of cast; track actor.id) {
              <div class="cast-member">
                <img 
                  [src]="actor.profile_path ? 'https://image.tmdb.org/t/p/w200' + actor.profile_path : '/assets/img/placeholder-person.webp'" 
                  [alt]="actor.name"
                  class="cast-photo">
                <h3>{{ actor.name }}</h3>
                <p>{{ actor.character }}</p>
              </div>
            }
          </div>
          
          <!-- Flecha derecha -->
          <button class="cast-nav-arrow next-arrow" (click)="scrollCastRight()">›</button>
        </div>
      </div>
    }
    @if (images.length > 0) {
      <div class="images-section">
        <h2>Galería de Imágenes</h2>
        <div class="images-container">
          @for (img of images; track img.file_path) {
            <div class="image-item" (click)="openImageModal(img.file_path)">
              <img [src]="'https://image.tmdb.org/t/p/w300' + img.file_path" [alt]="displayTitle">
            </div>
          }
        </div>
      </div>
    }
  </div>
  @if (modalImage) {
     <div class="modal-overlay" (click)="closeModal()">
      <img [src]="'https://image.tmdb.org/t/p/original' + modalImage" alt="Imagen">
    </div>
  }
} @else {
  <div class="error">
    <h2>Contenido no encontrado</h2>
    <button (click)="goBack()">Volver al inicio</button>
  </div>
}
